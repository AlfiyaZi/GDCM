# VTK-Python testing
IF(GDCM_WRAP_PYTHON)
  #MESSAGE("${VTK_PYTHONPATH_DIRS}")
  IF(VTK_PYTHONPATH_DIRS)
    STRING(REGEX REPLACE ";" ":" UNIX_VTK_PYTHONPATH_DIRS "${VTK_PYTHONPATH_DIRS}")
  ELSE(VTK_PYTHONPATH_DIRS)
  # if VTK_PYTHONPATH_DIRS is not given (very old VTK) then simply hope the user set his pythonpath properly:
  #  SET(UNIX_VTK_PYTHONPATH_DIRS "$ENV{PYTHONPATH}")
  # previous solution was not safe, let's hope the following are set properly:
    SET(UNIX_VTK_PYTHONPATH_DIRS "${VTK_SOURCE_DIR}/Wrapping/Python:${VTK_LIBRARY_DIRS}")
  ENDIF(VTK_PYTHONPATH_DIRS)
  SET(VTK_PYTHON_TESTS
    TestvtkGDCMImageWriter
  )
  IF(CMAKE_HAVE_PTHREAD_H)
    SET(VTK_PYTHON_TESTS ${VTK_PYTHON_TESTS}
      TestvtkGDCMThreadedImageReader
    )
  ENDIF(CMAKE_HAVE_PTHREAD_H)

  FOREACH(test ${VTK_PYTHON_TESTS})
    #SET_SOURCE_FILES_PROPERTIES(${test}.py PROPERTIES PYTHONPATH "${LIBRARY_OUTPUT_PATH}")
    SET_SOURCE_FILES_PROPERTIES(${test}.py PROPERTIES PYTHONPATH
      "${UNIX_VTK_PYTHONPATH_DIRS}:${LIBRARY_OUTPUT_PATH}")
    ADD_PYTHON_TEST(${test}Python ${test}.py ${GDCM_DATA_ROOT}/test.acr)
  ENDFOREACH(test)

ENDIF(GDCM_WRAP_PYTHON)

